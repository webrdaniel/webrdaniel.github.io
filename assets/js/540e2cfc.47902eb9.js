"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["34492"],{76397:function(e,r,n){n.r(r),n.d(r,{default:()=>h,frontMatter:()=>u,metadata:()=>t,assets:()=>d,toc:()=>p,contentTitle:()=>c});var t=JSON.parse('{"id":"guides/avoid-blocking","title":"Avoid getting blocked","description":"How to avoid getting blocked when scraping","source":"@site/versioned_docs/version-3.2/guides/avoid_blocking.mdx","sourceDirName":"guides","slug":"/guides/avoid-blocking","permalink":"/docs/3.2/guides/avoid-blocking","draft":false,"unlisted":false,"editUrl":"https://github.com/apify/crawlee/edit/master/website/versioned_docs/version-3.2/guides/avoid_blocking.mdx","tags":[],"version":"3.2","lastUpdatedBy":"Martin Ad\xe1mek","lastUpdatedAt":1675760121000,"frontMatter":{"id":"avoid-blocking","title":"Avoid getting blocked","description":"How to avoid getting blocked when scraping"},"sidebar":"docs","previous":{"title":"Scaling our crawlers","permalink":"/docs/3.2/guides/scaling-crawlers"},"next":{"title":"JSDOMCrawler","permalink":"/docs/3.2/guides/jsdom-crawler-guide"}}'),i=n("85893"),s=n("50065"),o=n("58168"),a=n("97645"),l=n("96199");let u={id:"avoid-blocking",title:"Avoid getting blocked",description:"How to avoid getting blocked when scraping"},c=void 0,d={},p=[{value:"Using browser fingerprints",id:"using-browser-fingerprints",level:2},{value:"Customizing browser fingerprints",id:"customizing-browser-fingerprints",level:2},{value:"Disabling browser fingerprints",id:"disabling-browser-fingerprints",level:2}];function g(e){let r={a:"a",code:"code",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.p,{children:["A scraper might get blocked for numerous reasons. Let's narrow it down to two main ones. The first one is a bad or blocked IP address. This topic is covered in the ",(0,i.jsx)(r.a,{href:"./proxy-management",children:"proxy management guide"}),". The second reason we will explore more in this guide is ",(0,i.jsx)(r.a,{href:"https://pixelprivacy.com/resources/browser-fingerprinting/",target:"_blank",rel:"noopener",children:"browser fingerprints"})," (or signatures)."]}),"\n",(0,i.jsx)(r.p,{children:"Browser fingerprint is a collection of browser attributes and significant features that can show if our browser is a bot or a real user. Moreover, most browsers have these unique features that allow the website to track the browser even within different IP addresses. This is the main reason why scrapers should change browser fingerprints while doing browser-based scraping. In return, it should significantly reduce the blocking."}),"\n",(0,i.jsx)(r.h2,{id:"using-browser-fingerprints",children:"Using browser fingerprints"}),"\n",(0,i.jsxs)(r.p,{children:["Changing browser fingerprints can be a tedious job. Luckily, Crawlee provides this feature with zero configuration necessary - the usage of fingerprints is enabled by default and available in ",(0,i.jsx)(r.code,{children:"PlaywrightCrawler"})," and ",(0,i.jsx)(r.code,{children:"PuppeteerCrawler"}),". So whenever we build a scraper that is using one of these crawlers - the fingerprints are going to be generated for the default browser and the operating system out of the box."]}),"\n",(0,i.jsx)(r.h2,{id:"customizing-browser-fingerprints",children:"Customizing browser fingerprints"}),"\n",(0,i.jsx)(r.p,{children:"In certain cases we want to narrow down the fingerprints used - e.g. specify a certain operating system, locale or browser. This is also possible with Crawlee - the crawler can have the generation algorithm customized to reflect the particular browser version and many more. Let's take a look at the examples bellow:"}),"\n",(0,i.jsxs)(o.Z,{groupId:"avoid_blocking",children:[(0,i.jsx)(a.Z,{value:"playwright",label:"PlaywrightCrawler",default:!0,children:(0,i.jsx)(l.default,{language:"js",children:"import { PlaywrightCrawler } from 'crawlee';\nimport { BrowserName, DeviceCategory, OperatingSystemsName } from '@crawlee/browser-pool';\n\nconst crawler = new PlaywrightCrawler({\n    browserPoolOptions: {\n        useFingerprints: true, // this is the default\n        fingerprintOptions: {\n            fingerprintGeneratorOptions: {\n                browsers: [{\n                    name: BrowserName.edge,\n                    minVersion: 96,\n                }],\n                devices: [\n                    DeviceCategory.desktop,\n                ],\n                operatingSystems: [\n                    OperatingSystemsName.windows,\n                ],\n            },\n        },\n    },\n    // ...\n});\n"})}),(0,i.jsx)(a.Z,{value:"puppeteer",label:"PuppeteerCrawler",children:(0,i.jsx)(l.default,{language:"js",children:"import { PuppeteerCrawler } from 'crawlee';\nimport { BrowserName, DeviceCategory } from '@crawlee/browser-pool';\n\nconst crawler = new PuppeteerCrawler({\n    browserPoolOptions: {\n        useFingerprints: true, // this is the default\n        fingerprintOptions: {\n            fingerprintGeneratorOptions: {\n                browsers: [\n                    BrowserName.chrome,\n                    BrowserName.firefox,\n                ],\n                devices: [\n                    DeviceCategory.mobile,\n                ],\n                locales: [\n                    'en-US',\n                ],\n            },\n        },\n    },\n    // ...\n});\n"})})]}),"\n",(0,i.jsx)(r.h2,{id:"disabling-browser-fingerprints",children:"Disabling browser fingerprints"}),"\n",(0,i.jsxs)(r.p,{children:["On the contrary, sometimes we want to entirely disable the usage of browser fingerprints. This is easy to do with Crawlee too. All we have to do is set the ",(0,i.jsx)(r.code,{children:"useFingerprints"})," option of the ",(0,i.jsx)(r.code,{children:"browserPoolOptions"})," to ",(0,i.jsx)(r.code,{children:"false"}),":"]}),"\n",(0,i.jsxs)(o.Z,{groupId:"avoid_blocking",children:[(0,i.jsx)(a.Z,{value:"playwright",label:"PlaywrightCrawler",default:!0,children:(0,i.jsx)(l.default,{language:"js",children:"import { PlaywrightCrawler } from 'crawlee';\n\nconst crawler = new PlaywrightCrawler({\n    browserPoolOptions: {\n        useFingerprints: false,\n    },\n    // ...\n});\n"})}),(0,i.jsx)(a.Z,{value:"puppeteer",label:"PuppeteerCrawler",children:(0,i.jsx)(l.default,{language:"js",children:"import { PuppeteerCrawler } from 'crawlee';\n\nconst crawler = new PuppeteerCrawler({\n    browserPoolOptions: {\n        useFingerprints: false,\n    },\n    // ...\n});\n"})})]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Related links"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://github.com/apify/fingerprint-suite",target:"_blank",rel:"noopener",children:"Fingerprint Suite Docs"})}),"\n"]})]})}function h(e={}){let{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}},97645:function(e,r,n){n.d(r,{Z:()=>s});var t=n("85893");n("67294");var i=n("67026");function s(e){let{children:r,hidden:n,className:s}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,i.Z)("tabItem_Ymn6",s),hidden:n,children:r})}},58168:function(e,r,n){n.d(r,{Z:()=>m});var t=n("85893"),i=n("67294"),s=n("67026"),o=n("34718"),a=n("16550"),l=n("8714"),u=n("89207"),c=n("69413"),d=n("54510");function p(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||i.isValidElement(e)&&function(e){let{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function g(e){let{value:r,tabValues:n}=e;return n.some(e=>e.value===r)}var h=n("6735");function f(e){let{className:r,block:n,selectedValue:i,selectValue:a,tabValues:l}=e,u=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.o5)(),d=e=>{let r=e.currentTarget,n=l[u.indexOf(r)].value;n!==i&&(c(r),a(n))},p=e=>{let r=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let n=u.indexOf(e.currentTarget)+1;r=u[n]??u[0];break}case"ArrowLeft":{let n=u.indexOf(e.currentTarget)-1;r=u[n]??u[u.length-1]}}r?.focus()};return(0,t.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":n},r),children:l.map(e=>{let{value:r,label:n,attributes:o}=e;return(0,t.jsx)("li",{role:"tab",tabIndex:i===r?0:-1,"aria-selected":i===r,ref:e=>{u.push(e)},onKeyDown:p,onClick:d,...o,className:(0,s.Z)("tabs__item","tabItem_LNqP",o?.className,{"tabs__item--active":i===r}),children:n??r},r)})})}function w(e){let{lazy:r,children:n,selectedValue:o}=e,a=(Array.isArray(n)?n:[n]).filter(Boolean);if(r){let e=a.find(e=>e.props.value===o);return e?(0,i.cloneElement)(e,{className:(0,s.Z)("margin-top--md",e.props.className)}):null}return(0,t.jsx)("div",{className:"margin-top--md",children:a.map((e,r)=>(0,i.cloneElement)(e,{key:r,hidden:e.props.value!==o}))})}function b(e){let r=function(e){let{defaultValue:r,queryString:n=!1,groupId:t}=e,s=function(e){let{values:r,children:n}=e;return(0,i.useMemo)(()=>{let e=r??p(n).map(e=>{let{props:{value:r,label:n,attributes:t,default:i}}=e;return{value:r,label:n,attributes:t,default:i}});return!function(e){let r=(0,c.lx)(e,(e,r)=>e.value===r.value);if(r.length>0)throw Error(`Docusaurus error: Duplicate values "${r.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[r,n])}(e),[o,h]=(0,i.useState)(()=>(function(e){let{defaultValue:r,tabValues:n}=e;if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!g({value:r,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${r}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return r}let t=n.find(e=>e.default)??n[0];if(!t)throw Error("Unexpected error: 0 tabValues");return t.value})({defaultValue:r,tabValues:s})),[f,w]=function(e){let{queryString:r=!1,groupId:n}=e,t=(0,a.k6)(),s=function(e){let{queryString:r=!1,groupId:n}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:r,groupId:n});return[(0,u._X)(s),(0,i.useCallback)(e=>{if(!s)return;let r=new URLSearchParams(t.location.search);r.set(s,e),t.replace({...t.location,search:r.toString()})},[s,t])]}({queryString:n,groupId:t}),[b,m]=function(e){let{groupId:r}=e,n=r?`docusaurus.tab.${r}`:null,[t,s]=(0,d.Nk)(n);return[t,(0,i.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:t}),v=(()=>{let e=f??b;return g({value:e,tabValues:s})?e:null})();return(0,l.Z)(()=>{v&&h(v)},[v]),{selectedValue:o,selectValue:(0,i.useCallback)(e=>{if(!g({value:e,tabValues:s}))throw Error(`Can't select invalid tab value=${e}`);h(e),w(e),m(e)},[w,m,s]),tabValues:s}}(e);return(0,t.jsxs)("div",{className:(0,s.Z)("tabs-container","tabList__CuJ"),children:[(0,t.jsx)(f,{...r,...e}),(0,t.jsx)(w,{...r,...e})]})}function m(e){let r=(0,h.Z)();return(0,t.jsx)(b,{...e,children:p(e.children)},String(r))}},50065:function(e,r,n){n.d(r,{Z:function(){return a},a:function(){return o}});var t=n(67294);let i={},s=t.createContext(i);function o(e){let r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);